<네스트 설치>
npm install -g @nestjs/cli
<프로젝트 생성>
nest new hello-world
<실행>
npm run start


<모듈 생성>
nest generate module Setting
<모듈에 대한 컨트롤러 생성>
nest generate controller Setting --flat
<서비스 생성>
nest generate service Setting --flat

<env 파일 읽기>
    npm install @nestjs/config
    <!-- main.ts -->
        import { NestFactory } from '@nestjs/core';
        import { AppModule } from './app.module';
        import { ConfigService } from '@nestjs/config';

        async function bootstrap() {
        const app = await NestFactory.create(AppModule);
        const configService = app.get(ConfigService);
        await app.listen(configService.get('PORT') || 3000);
        }
        bootstrap();
    <!-- app.module.ts -->
        import { Module } from '@nestjs/common';
        import { ConfigModule } from '@nestjs/config';
        
        @Module({
        imports: [
                ConfigModule.forRoot({
                    isGlobal: true,  // 이 옵션을 사용하면 모든 모듈에서 ConfigService를 사용할 수 있습니다.
                }),
            ],
            controllers: [],
            providers: [],
        })
        export class AppModule {}
    <!-- 환경변수 사용 branch.service.ts -->
        import { Injectable } from '@nestjs/common';
        import { Pool } from 'pg';
        import { ConfigService } from '@nestjs/config';
        
        @Injectable()
        export class BranchService {
            private readonly pool: Pool;
            
            constructor(private configService: ConfigService) {
                this.pool = new Pool({
                host: this.configService.get<string>('DB_HOST'),
                user: this.configService.get<string>('DB_USER'),
                password: this.configService.get<string>('DB_PASSWORD'),
                database: this.configService.get<string>('DB_DATABASE'),
                port: this.configService.get<number>('DB_PORT'),
                });
            }
            
            // 나머지 코드
        }
    
    <typeorm설치를 통해 DB연결>
        npm install @nestjs/typeorm typeorm pg
        <!-- pg는 postgreSQL 모듈 -->

        <!-- AppModule에 TypeORM등록 -->
            import { Module } from '@nestjs/common';
            import { TypeOrmModule } from '@nestjs/typeorm';

            @Module({
            imports: [
                TypeOrmModule.forRoot({
                type: 'postgres',
                host: process.env.DB_HOST,
                port: Number(process.env.DB_PORT),
                username: process.env.DB_USER,
                password: process.env.DB_PASSWORD,
                database: process.env.DB_DATABASE,
                entities: [],
                synchronize: true,
                }),
                // 다른 모듈
            ],
            })
            export class AppModule {}
